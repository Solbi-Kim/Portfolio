<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Video.js CSS (CDN) -->
  <link rel="stylesheet" href="https://unpkg.com/video.js@8/dist/video-js.css">

  <!-- 우리 CSS -->
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <main class="ccv-wrap">
    <!-- 우하단 CC 뱃지 -->
    <div class="ccv-frame">
    <div class="ccv-badge">SV</div>

    <!-- 비디오 -->
    <video
      id="shoviPlayer"
      class="video-js vjs-ccv"
      controls
      playsinline
      preload="metadata"
      poster=""
    ></video>
    </div>
  </main>

  <!-- CDN JS -->
  <script src="https://unpkg.com/video.js@8/dist/video.min.js"></script>
  <script src="https://unpkg.com/hls.js@latest"></script>
  
  <script>

  function applyVideoAspect(player) {
    const tech = player.tech_ && player.tech_.el && player.tech_.el();
    if (!tech || !tech.videoWidth || !tech.videoHeight) return;

    const w = tech.videoWidth;
    const h = tech.videoHeight;
    const frame = document.querySelector('.ccv-frame');
    if (frame) {
      frame.style.setProperty('--ratio', `${w} / ${h}`);
    }
  }

  // 메타데이터 로드 시점에 비율 반영
  player.on('loadedmetadata', function () {
    applyVideoAspect(player);
  });

  // 소스가 바뀌어도 다시 반영
  player.on('loadeddata', function () {
    applyVideoAspect(player);
  });
</script>

  <!-- 우리 JS -->
  <script src="./app.js"></script>
</body>
</html>
